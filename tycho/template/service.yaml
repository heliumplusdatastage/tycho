{% for container in system.containers %}
---
# Generated by Tycho {{ now() }}
apiVersion: v1
kind: Service
metadata:
  labels:
    name: {{ service.name }} 
    executor: tycho
    tycho-guid: {{ system.identifier }}
  name: {{ service.name }} 
resourceversion: v1
spec:
  type: LoadBalancer
  selector:
    name: {{ system.name }}
  ports:
  {% for port in container.ports %}
  - name: port-{{ loop.index }}
    port: {{ container.ports[loop.index-1]['containerPort'] }}
    protocol: TCP
    targetPort: {{ container.ports[loop.index-1]['containerPort'] }}
  {% endfor %}
{% endfor %}
  
    
